define("block_xp/modal",["exports","core/modal_cancel","core/str","core/templates","block_xp/compat","block_xp/role-button","block_xp/utils"],(function(_exports,_modal_cancel,Str,_templates,Compat,RoleButton,_utils){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Modal.
   *
   * @module     block_xp/modal
   * @copyright  2025 Frédéric Massart
   * @author     Frédéric Massart <fred@branchup.tech>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.openSimpleModalFromSelector=function(selector){const node=document.querySelector(selector);if(!node)return;openSimpleModal(node)},_exports.registerSimpleOpenModalActionObserver=function(){if(simpleOpenModalActionObserverRegistered)return;simpleOpenModalActionObserverRegistered=!0,RoleButton.delegateClick("body",'[data-xp-action="open-modal"]',(node=>{openSimpleModal(node)}))},_modal_cancel=_interopRequireDefault(_modal_cancel),Str=_interopRequireWildcard(Str),_templates=_interopRequireDefault(_templates),Compat=_interopRequireWildcard(Compat),RoleButton=_interopRequireWildcard(RoleButton);let simpleOpenModalActionObserverRegistered=!1;async function openSimpleModal(node){var _node$dataset$templat;const template=node.dataset.template,templateContext=(0,_utils.getDataFromJsonScript)(null!==(_node$dataset$templat=node.dataset.templateData)&&void 0!==_node$dataset$templat?_node$dataset$templat:""),modalArgs=(0,_utils.extractNodeData)(node,"modal");if(!template.startsWith("block_xp/")&&!template.startsWith("local_xp/"))return;let modalConfig={body:_templates.default.render(template,templateContext),type:"CANCEL"};"title"in modalArgs&&(modalConfig.title=modalArgs.title),"large"in modalArgs&&(modalConfig.large=Boolean(modalConfig.large));const modal=await Compat.createModal(modalConfig,_modal_cancel.default);modal.getRoot()[0].classList.add("block_xp"),modal.setButtonText("cancel",Str.get_string("closebuttontitle","core")),modal.show()}}));

//# sourceMappingURL=modal.min.js.map