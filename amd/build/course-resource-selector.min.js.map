{"version":3,"file":"course-resource-selector.min.js","sources":["../src/course-resource-selector.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Course resource selector.\n *\n * @module     block_xp/course-resource-selector\n * @copyright  2018 Frédéric Massart\n * @author     Frédéric Massart <fred@branchup.tech>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/ajax', 'block_xp/resource-selector'],\n    function($, Ajax, ResourceSelector, Pending, Notification) {\n\n        /**\n         * Course resource selector.\n         *\n         * @param {String|jQuery} container The container of the contents.\n         * @param {jQuery} searchTermFieldNode The input field in which the use searches.\n         */\n        function CourseResourceSelector(container, searchTermFieldNode) {\n            ResourceSelector.prototype.constructor.apply(this, [container, this.searchFunction.bind(this), searchTermFieldNode]);\n        }\n\n        CourseResourceSelector.prototype = Object.create(ResourceSelector.prototype);\n        CourseResourceSelector.prototype.constructor = CourseResourceSelector;\n\n        CourseResourceSelector.prototype.searchFunction = function(term) {\n            var calls = [\n                {\n                    methodname: 'block_xp_search_courses',\n                    args: {query: term}\n                }\n            ];\n\n            return Ajax.call(calls)[0].then(function(results) {\n                return results.map(function(c) {\n                    return {\n                        _iscourse: true,\n                        name: c.fullname,\n                        subname: c.shortname,\n                        course: c\n                    };\n                });\n            }).catch(function(e) {\n                Notification.exception(e);\n            });\n        };\n\n        return CourseResourceSelector;\n    });\n"],"names":["define","$","Ajax","ResourceSelector","Pending","Notification","CourseResourceSelector","container","searchTermFieldNode","prototype","constructor","apply","this","searchFunction","bind","Object","create","term","calls","methodname","args","query","call","then","results","map","c","_iscourse","name","fullname","subname","shortname","course","catch","e","exception"],"mappings":";;;;;;;;AAuBAA,2CAAO,CAAC,SAAU,YAAa,+BAC3B,SAASC,EAAGC,KAAMC,iBAAkBC,QAASC,uBAQhCC,uBAAuBC,UAAWC,qBACvCL,iBAAiBM,UAAUC,YAAYC,MAAMC,KAAM,CAACL,UAAWK,KAAKC,eAAeC,KAAKF,MAAOJ,6BAGnGF,uBAAuBG,UAAYM,OAAOC,OAAOb,iBAAiBM,WAClEH,uBAAuBG,UAAUC,YAAcJ,uBAE/CA,uBAAuBG,UAAUI,eAAiB,SAASI,UACnDC,MAAQ,CACR,CACIC,WAAY,0BACZC,KAAM,CAACC,MAAOJ,eAIff,KAAKoB,KAAKJ,OAAO,GAAGK,MAAK,SAASC,gBAC9BA,QAAQC,KAAI,SAASC,SACjB,CACHC,WAAW,EACXC,KAAMF,EAAEG,SACRC,QAASJ,EAAEK,UACXC,OAAQN,SAGjBO,OAAM,SAASC,GACd7B,aAAa8B,UAAUD,OAIxB5B"}