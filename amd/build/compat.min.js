define(["exports","core_form/dynamicform","core_form/modalform","core/templates"],(function(_exports,_dynamicform,_modalform,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Compat.
   *
   * @copyright  2024 Frédéric Massart
   * @author     Frédéric Massart <fred@branchup.tech>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.asyncRender=void 0,_exports.getFormNode=function(form){try{return form.getFormNode()}catch(e){return form instanceof _modalform.default?form.modal.getRoot().find("form")[0]:form instanceof _dynamicform.default?form.container.querySelector("form"):document.createElement("form")}},_exports.markFormSubmitted=function(node){try{require("core_form/changechecker",(function(ChangeChecker){ChangeChecker.markFormSubmitted(node)}))}catch(e){void 0!==M.core_formchangechecker&&M.core_formchangechecker.set_form_submitted()}},_dynamicform=_interopRequireDefault(_dynamicform),_modalform=_interopRequireDefault(_modalform),_templates=_interopRequireDefault(_templates);_exports.asyncRender=(name,context)=>"renderForPromise"in _templates.default?_templates.default.renderForPromise(name,context):new Promise(((resolve,reject)=>{_templates.default.render(name,context).then(((html,js)=>{resolve({html:html,js:js})})).catch((err=>{reject(err)}))}))}));

//# sourceMappingURL=compat.min.js.map