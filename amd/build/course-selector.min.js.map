{"version":3,"file":"course-selector.min.js","sources":["../src/course-selector.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Course selector.\n *\n * @copyright  2024 Frédéric Massart\n * @author     Frédéric Massart <fred@branchup.tech>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Modal from 'core/modal';\nimport ModalEvents from 'core/modal_events';\nimport {asyncRender} from 'block_xp/compat';\nimport CourseResourceSelector from 'block_xp/course-resource-selector';\nimport $ from 'jquery';\n\nexport const openCourseSelector = async(onSelected) => {\n    const {html} = await asyncRender('block_xp/modal-course-selector', {});\n    const modal = new Modal(html);\n    modal.setRemoveOnClose(true);\n\n    const rootJq = modal.getRoot();\n    const root = rootJq[0];\n\n    rootJq.addClass('block_xp');\n    rootJq.on(ModalEvents.shown, () => {\n        const container = root.querySelector('.search-result-contents');\n        const termField = root.querySelector('.search-term-course');\n        const cs = new CourseResourceSelector($(container), $(termField));\n        cs.onResourceSelected(function(e, resource) {\n            onSelected(resource.course);\n            modal.hide();\n        });\n    });\n\n    modal.show();\n};\n"],"names":["async","html","modal","Modal","setRemoveOnClose","rootJq","getRoot","root","addClass","on","ModalEvents","shown","container","querySelector","termField","CourseResourceSelector","onResourceSelected","e","resource","onSelected","course","hide","show"],"mappings":";;;;;;;sUA6BkCA,MAAAA,mBACxBC,KAACA,YAAc,uBAAY,iCAAkC,IAC7DC,MAAQ,IAAIC,eAAMF,MACxBC,MAAME,kBAAiB,SAEjBC,OAASH,MAAMI,UACfC,KAAOF,OAAO,GAEpBA,OAAOG,SAAS,YAChBH,OAAOI,GAAGC,sBAAYC,OAAO,WACnBC,UAAYL,KAAKM,cAAc,2BAC/BC,UAAYP,KAAKM,cAAc,uBAC1B,IAAIE,iCAAuB,mBAAEH,YAAY,mBAAEE,YACnDE,oBAAmB,SAASC,EAAGC,UAC9BC,WAAWD,SAASE,QACpBlB,MAAMmB,aAIdnB,MAAMoB"}