define("block_xp/ui-completion-rules-lazy",["block_xp/ui-commons-lazy"],(()=>(()=>{var deferred,leafPrototypes,getProto,__webpack_modules__={913:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{App:()=>App,dependencies:()=>dependencies,startApp:()=>startApp});var tabs=__webpack_require__(848),react=__webpack_require__(540),react_dom=__webpack_require__(961),es=__webpack_require__(942),menu=__webpack_require__(929);const utils_classNames=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return args.filter(Boolean).join(" ")};let uniqueId=0;const Dropdown=_ref=>{let{buttonLabel:buttonLabel,items:items}=_ref;return react.createElement(menu.W,{as:"div",className:"dropdown"},react.createElement(menu.W.Button,{className:"btn btn-link btn-icon icon-size-3 rounded-circle"},react.createElement("i",{className:"fa fa-ellipsis-v text-dark py-2","aria-hidden":"true"}),react.createElement("span",{className:"xp-sr-only"},buttonLabel)),react.createElement(menu.W.Items,{className:"dropdown-menu dropdown-menu-right xp-block"},items.map((item=>"divider"in item?react.createElement("div",{key:item.id,className:"dropdown-divider"}):react.createElement(menu.W.Item,{key:item.id},(_ref2=>{let{active:active}=_ref2;return react.createElement("a",{...item.props,className:utils_classNames("dropdown-item",item.danger?"text-danger":null)},item.label)}))))))},AppLoading=()=>react.createElement("div",{className:"block_xp-react-loading"},react.createElement("div",{className:"xp-grid xp-grid-cols-2 xp-gap-4 xp-animate-pulse"},react.createElement("div",{className:"xp-col-span-2 xp-bg-gray-100 xp-rounded xp-h-4"}),react.createElement("div",{className:"xp-bg-gray-100 xp-rounded xp-h-4"}),react.createElement("div",{className:"xp-bg-gray-100 xp-rounded xp-h-4"}))),M=window.M,modules={};async function ajaxRequest(method,args){return(await getModuleAsync("core/ajax")).call([{methodname:method,args:args}])[0]}function getString(id,component,a){return M.util.get_string(id,component,a)}function hasString(id,component){return void 0!==M.str[component]&&void 0!==M.str[component][id]}function getModule(name){return modules[name]}async function getModuleAsync(amd){return modules[amd]?modules[amd]:new Promise(((resolve,reject)=>{window.require([amd],(mod=>{modules[amd]=mod,resolve(mod)}),reject)}))}let loadStringCache=function(){let maxItems=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128,items={},keys=[];const purge=()=>{if(keys.length>maxItems){const idx=Math.max(0,keys.length-maxItems);keys.slice(0,idx).forEach((key=>{delete items[key]})),keys=keys.slice(idx)}};return{set:(key,value)=>{items[key]=value,keys.push(key),purge()},get:key=>items[key]}}(64);async function loadString(id,component){const cacheKey="".concat(id,"/").concat(component);let promise=loadStringCache.get(cacheKey);if(!promise){promise=(await getModuleAsync("core/str")).get_string(id,component),loadStringCache.set(cacheKey,promise)}return await promise}async function loadStrings(ids,component){const cacheKey="".concat(ids.join(","),"/").concat(component);let promise=loadStringCache.get(cacheKey);if(!promise){promise=(await getModuleAsync("core/str")).get_strings(ids.map((id=>({key:id,component:component})))),loadStringCache.set(cacheKey,promise)}return await promise}const makeAddonContextValueFromAppProps=props=>{var _props$addon;return{activated:!1,enablepromo:!0,promourl:"https://www.levelup.plus/xp/",...null!==(_props$addon=null==props?void 0:props.addon)&&void 0!==_props$addon?_props$addon:{}}},contexts_AddonContext=(0,react.createContext)({activated:!1,enablepromo:!0,promourl:"https://www.levelup.plus/xp/"}),hooks_useAnchorButtonProps=onClick=>({href:"#",role:"button",...useRoleButtonListeners(onClick)}),useDuplicatedActionPreventor=function(){let msDelay=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;const ref=(0,react.useRef)();return(0,react.useCallback)((()=>!(ref.current&&ref.current>Date.now()-msDelay)&&(ref.current=Date.now(),!0)),[])},useModules=modules=>{const modulesPromise=(0,react.useRef)(),modulesRef=(0,react.useRef)(),[ready,setReady]=(0,react.useState)(!1);(0,react.useEffect)((()=>{if(modulesRef.current)return;modulesPromise.current||(modulesPromise.current=Promise.all(modules.map((module=>getModuleAsync(module)))));let cancelled=!1;return modulesPromise.current.then((loadedModles=>{cancelled||(modulesRef.current=modules.reduce(((acc,module,i)=>(acc[module]=loadedModles[i],acc)),{}),setReady(!0))})),()=>{cancelled=!0}}));return{getModule:(0,react.useCallback)((module=>{var _modulesRef$current$m;return modulesRef.current&&null!==(_modulesRef$current$m=modulesRef.current[module])&&void 0!==_modulesRef$current$m?_modulesRef$current$m:null}),[ready,modulesRef.current])}},useRoleButtonListeners=onClick=>({onClick:e=>{e.preventDefault(),onClick()},onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),onClick())}}),useUniqueId=()=>{const[id]=(0,react.useState)("xp-".concat(Date.now(),"-").concat(uniqueId++));return id},hooks_useString=function(id){let component=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block_xp",a=arguments.length>2?arguments[2]:void 0;const wasKnownAtMount=(0,react.useMemo)((()=>hasString(id,component)),[id,component]),[isLoaded,setLoaded]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{setLoaded(!1)}),[id,component]),(0,react.useEffect)((()=>{if(wasKnownAtMount||isLoaded)return;let cancelled=!1;return(async()=>{try{await loadString(id,component),cancelled||setLoaded(!0)}catch(err){}})(),()=>{cancelled=!0}})),hasString(id,component)?getString(id,component,a):"​"},hooks_useStrings=function(ids){let component=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block_xp";const idsForKey=ids.join(","),allKnownAtMount=(0,react.useMemo)((()=>ids.every((id=>hasString(id,component)))),[idsForKey,component]),[isLoaded,setLoaded]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{setLoaded(!1)}),[idsForKey,component]),(0,react.useEffect)((()=>{if(allKnownAtMount||isLoaded)return;let cancelled=!1;return(async()=>{try{await loadStrings(ids,component),cancelled||setLoaded(!0)}catch(err){}})(),()=>{cancelled=!0}})),(id,a)=>hasString(id,component)?getString(id,component,a):"​"},SaveCancelModal=_ref3=>{let{children:children,onClose:onClose,onSave:onSave,show:show,title:title,saveButtonText:saveButtonText,defaultHeight:defaultHeight,large:large,canSave:canSave=!0}=_ref3;const modalPromise=(0,react.useRef)(),modalRef=(0,react.useRef)(),isSavePermitted=useDuplicatedActionPreventor(),{getModule:getModule}=useModules(["core/modal_factory","core/modal_events"]),[ready,setReady]=(0,react.useState)(!1),getSaveButton=(0,react.useCallback)((()=>{if(!modalRef.current)return null;const node=modalRef.current.getFooter()[0].querySelector('[data-action="save"]');return null!=node?node:null}),[modalRef.current]),setSaveButtonText=text=>{const saveBtn=getSaveButton();saveBtn&&text&&(saveBtn.textContent=text)};return(0,react.useEffect)((()=>{let cancelled=!1;if(modalRef.current)return;const ModalFactory=getModule("core/modal_factory");return ModalFactory?(modalPromise.current||(modalPromise.current=ModalFactory.create({type:ModalFactory.types.SAVE_CANCEL,title:title,large:large,body:"<div class='block_xp' style='".concat(defaultHeight?"height: ".concat(defaultHeight,"px"):"","'></div>")})),modalPromise.current.then((modal=>{cancelled||(modalRef.current=modal,saveButtonText&&setSaveButtonText(saveButtonText),setReady(!0),show&&modal.show())})),()=>{cancelled=!0}):void 0})),(0,react.useEffect)((()=>{const modal=modalRef.current;if(!modal)return;const ModalEvents=getModule("core/modal_events");if(!ModalEvents)return;const root=modal.getRoot(),handleSave=e=>{isSavePermitted()&&onSave&&onSave(e)},handleClose=()=>{onClose&&onClose()},updateReactNodeHeight=()=>{const body=modal.getBody()[0],reactNode=body?body.querySelector(".block_xp"):null;if(!body||!reactNode)return;const height=body.clientHeight-(parseFloat(getComputedStyle(body).paddingTop)+parseFloat(getComputedStyle(body).paddingBottom));reactNode.style.height="".concat(height,"px")},attachResize=()=>{window.addEventListener("resize",updateReactNodeHeight)};return root.on(ModalEvents.save,handleSave),root.on(ModalEvents.hidden,handleClose),root.on(ModalEvents.shown,attachResize),()=>{root.off(ModalEvents.save,handleSave),root.off(ModalEvents.hidden,handleClose),root.off(ModalEvents.shown,attachResize),window.removeEventListener("resize",updateReactNodeHeight)}})),(0,react.useEffect)((()=>{modalRef.current&&(show?modalRef.current.show():modalRef.current.hide())}),[show,modalRef.current]),(0,react.useEffect)((()=>{modalRef.current&&title&&modalRef.current.setTitle(title)}),[title,modalRef.current]),(0,react.useEffect)((()=>{setSaveButtonText(saveButtonText)}),[saveButtonText,modalRef.current]),(0,react.useEffect)((()=>{((attr,value)=>{const saveBtn=getSaveButton();saveBtn&&attr&&(null==value||!1===value?saveBtn.removeAttribute(attr):saveBtn.setAttribute(attr,value))})("disabled",!canSave)}),[canSave,modalRef.current]),modalRef.current?react_dom.createPortal(children,modalRef.current.getBody()[0].querySelector(".block_xp")):null},DeleteModal=_ref4=>{let{children:children,onClose:onClose,onDelete:onDelete,show:show,title:title}=_ref4;const modalPromise=(0,react.useRef)(),modalRef=(0,react.useRef)(),[ready,setReady]=(0,react.useState)(!1),isDeletePermitted=useDuplicatedActionPreventor(),deleteStr=hooks_useString("delete","core"),{getModule:getModule}=useModules(["core/modal_factory","core/modal_events"]),getDeleteButton=(0,react.useCallback)((()=>{if(!modalRef.current)return null;const node=modalRef.current.getFooter()[0].querySelector('[data-action="save"]');return null!=node?node:null}),[modalRef.current]);return(0,react.useEffect)((()=>{let cancelled=!1;if(modalRef.current)return;const ModalFactory=getModule("core/modal_factory");return ModalFactory?(modalPromise.current||(modalPromise.current=ModalFactory.create({type:ModalFactory.types.SAVE_CANCEL,title:title,body:"<div class='block_xp'></div>"})),modalPromise.current.then((modal=>{if(cancelled)return;modalRef.current=modal;const deleteButton=getDeleteButton();deleteButton&&(deleteStr&&(deleteButton.textContent=deleteStr),deleteButton.classList.add("btn-danger")),setReady(!0),show&&modal.show()})),()=>{cancelled=!0}):void 0})),(0,react.useEffect)((()=>{const modal=modalRef.current;if(!modal)return;const ModalEvents=getModule("core/modal_events");if(!ModalEvents)return;const root=modal.getRoot(),handleSave=e=>{isDeletePermitted()&&onDelete&&onDelete(e)},handleClose=()=>{onClose&&onClose()};return root.on(ModalEvents.save,handleSave),root.on(ModalEvents.hidden,handleClose),()=>{root.off(ModalEvents.save,handleSave),root.off(ModalEvents.hidden,handleClose)}})),(0,react.useEffect)((()=>{modalRef.current&&(show?modalRef.current.show():modalRef.current.hide())}),[show,modalRef.current]),(0,react.useEffect)((()=>{modalRef.current&&title&&modalRef.current.setTitle(title)}),[title,modalRef.current]),(0,react.useEffect)((()=>{if(!modalRef.current||!deleteStr)return;const btn=getDeleteButton();btn&&(btn.textContent=deleteStr)}),[deleteStr,modalRef.current]),modalRef.current?react_dom.createPortal(children,modalRef.current.getBody()[0].querySelector(".block_xp")):null},ModalForm=_ref5=>{let{formClass:formClass,formArgs:formArgs,onClose:onClose,onSubmit:onSubmit,title:title}=_ref5;const modalFormRef=(0,react.useRef)(),{getModule:getModule}=useModules(["core_form/modalform","core/modal_factory","core/modal_events"]);return(0,react.useEffect)((()=>{if(modalFormRef.current)return;const ModalForm=getModule("core_form/modalform");ModalForm&&(modalFormRef.current=new ModalForm({formClass:formClass,args:null!=formArgs?formArgs:{},modalConfig:{title:title}}),modalFormRef.current.show())})),(0,react.useEffect)((()=>{const modalForm=modalFormRef.current;if(!modalForm)return;const ModalForm=getModule("core_form/modalform"),ModalEvents=getModule("core/modal_events");if(!ModalForm||!ModalEvents)return;const handleLoaded=()=>{const root=modalForm.modal.getRoot();root[0].classList.add("block_xp"),root.on(ModalEvents.hidden,handleClose)},handleSubmit=()=>{onSubmit&&onSubmit()},handleClose=()=>{onClose&&onClose()};return modalForm.addEventListener(modalForm.events.LOADED,handleLoaded),modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,handleSubmit),modalForm.addEventListener(modalForm.events.CANCEL_BUTTON_PRESSED,handleClose),()=>{var _modalForm$modal;const modalForm=modalFormRef.current,root=null==modalForm||null===(_modalForm$modal=modalForm.modal)||void 0===_modalForm$modal?void 0:_modalForm$modal.getRoot(),rootEl=null==root?void 0:root[0];null==rootEl||rootEl.removeEventListener(modalForm.events.LOADED,handleLoaded),null==rootEl||rootEl.removeEventListener(modalForm.events.FORM_SUBMITTED,handleSubmit),null==rootEl||rootEl.removeEventListener(modalForm.events.CANCEL_BUTTON_PRESSED,handleClose),root.off(ModalEvents.hidden,handleClose)}})),(0,react.useEffect)((()=>{if(!modalFormRef.current)return;const modal=modalFormRef.current.modal;modal&&modal.setTitle(title)}),[title]),null},NotificationError=_ref6=>{let{children:children}=_ref6;return react.createElement("div",{className:"alert alert-danger"},children)},components_Str=_ref9=>{let{id:id,component:component="block_xp",a:a}=_ref9;const str=hooks_useString(id,component,a);return react.createElement(react.Fragment,null,str||"​")},CircleButton=_ref10=>{let{className:className,...props}=_ref10;return react.createElement("button",{className:utils_classNames("xp-bg-transparent xp-border-0 xp-p-2 xp-flex xp-items-center xp-rounded-full hover:xp-bg-gray-100",className),type:"button",...props})},Button=_ref11=>{let{onClick:onClick,disabled:disabled,children:children,primary:primary,className:className,type:type="button"}=_ref11;const classes=utils_classNames("btn",primary?"btn-primary":"btn-default btn-secondary",className);return react.createElement("button",{className:classes,onClick:onClick,disabled:disabled,type:type},children)},Select=_ref15=>{let{className:className="",...props}=_ref15;return react.createElement("select",{...props,className:"xp-m-0 xp-max-w-auto form-control ".concat(className)})},components_Input=_ref14=>{let{className:className="",...props}=_ref14;return react.createElement("input",{...props,className:"xp-m-0 form-control ".concat(className)})},NumInput=_ref17=>{let{className:className,value:value,onChange:onChange,selectOnFocus:selectOnFocus,...props}=_ref17;const inputProps=((value,onChange)=>{const valueAsString=value.toString(),[externalValue,setExternalValue]=(0,react.useState)(valueAsString),[internalValue,setInternalValue]=(0,react.useState)(externalValue);return(0,react.useEffect)((()=>{valueAsString!==externalValue&&(setExternalValue(valueAsString),setInternalValue(valueAsString))})),{value:internalValue,onChange:e=>{setInternalValue(e.target.value.replace(/[^0-9]/,""))},onBlur:e=>{const v=parseInt(internalValue,10)||0;setExternalValue(v.toString()),onChange(v)}}})(value,onChange);return react.createElement(components_Input,{type:"text",...inputProps,className:className,onFocus:e=>{selectOnFocus&&e.currentTarget.select()},...props})},NumberInputWithButtons=_ref19=>{let{onChange:onChange,value:value,min:min,max:max,suffix:suffix,step:step=1,inputProps:inputProps}=_ref19;const hasMin=void 0!==min,hasMax=void 0!==max,minDisabled=hasMin&&min>=value,maxDisabled=hasMax&&max<=value,minusProps=hooks_useAnchorButtonProps((()=>{minDisabled||handleChange(value-step)})),plusProps=hooks_useAnchorButtonProps((()=>{maxDisabled||handleChange(value+step)})),handleChange=n=>{let final=n;hasMin&&(final=Math.max(min,final)),hasMax&&(final=Math.min(max,final)),onChange(final)},{className:inputClassName,...remainingInputProps}=null!=inputProps?inputProps:{},allInputProps={className:utils_classNames("xp-h-auto xp-border-0 xp-text-center xp-rounded-none focus:xp-z-10",suffix?"xp-pr-6":null,inputClassName||"xp-w-16"),...remainingInputProps};return react.createElement("div",{className:"xp-inline-flex xp-rounded xp-border xp-border-solid xp-border-gray-300"},react.createElement("a",{...minusProps,className:utils_classNames("xp-flex-0 xp-border-0 xp-border-gray-300 xp-border-solid xp-border-r xp-rounded-l xp-py-0.5 xp-px-1 xp-flex xp-items-center xp-justify-center","focus:xp-z-10",minDisabled?"xp-bg-gray-100 xp-cursor-pointer xp-text-gray-500":"xp-bg-white xp-text-inherit")},react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"xp-w-5 xp-h-5"},react.createElement("path",{fillRule:"evenodd",d:"M4 10a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H4.75A.75.75 0 014 10z",clipRule:"evenodd"}))),react.createElement("div",{className:"xp-flex-1 xp-relative"},react.createElement(NumInput,{onChange:handleChange,value:value,...allInputProps}),suffix?react.createElement("div",{className:"xp-pointer-events-none xp-absolute xp-inset-y-0 xp-right-0 xp-flex xp-items-center xp-pr-2"},react.createElement("span",{className:"xp-text-gray-500"},suffix)):null),react.createElement("a",{...plusProps,className:utils_classNames("xp-flex-0 xp-border-0 xp-border-gray-300 xp-border-solid xp-border-l xp-rounded-r xp-py-0.5 xp-px-1 xp-flex xp-items-center xp-justify-center","focus:xp-z-10",maxDisabled?"xp-bg-gray-100 xp-cursor-pointer xp-text-gray-500":"xp-bg-white xp-text-inherit")},react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"xp-w-5 xp-h-5"},react.createElement("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"}))))},ListEntry=_ref20=>{let{resource:resource,onSelect:onSelect}=_ref20;return"header"===resource.type?react.createElement(ListEntryHeader,{label:resource.label}):react.createElement(ListEntryItem,{label:resource.label,description:resource.description,isavailable:resource.isavailable,onSelect:onSelect})},ListEntryItem=_ref21=>{let{label:label,description:description,isavailable:isavailable=!0,onSelect:onSelect}=_ref21;const headingId=useUniqueId(),buttonListeners=useRoleButtonListeners(onSelect),disabledOpacityClass="".concat(isavailable?"":"xp-opacity-60 group-focus:xp-opacity-100 group-hover:xp-opacity-100");return react.createElement("div",{className:"xp-p-[0.2rem] xp-relative xp-group focus:xp-z-10 hover:xp-bg-gray-100"},react.createElement("div",{tabIndex:0,role:"button","aria-describedby":headingId,className:"xp-px-1.5 xp-py-0.5",...buttonListeners},react.createElement("div",{id:headingId,className:"xp-flex"},react.createElement("div",{className:utils_classNames(disabledOpacityClass,"xp-text-medium",description?"xp-text-xl":"xp-text-base")},label),isavailable?null:react.createElement("div",{className:"xp-ml-2"},react.createElement("span",{className:"badge badge-pill badge-warning"},react.createElement(components_Str,{id:"unavailable"})))),description?react.createElement("div",{className:utils_classNames(disabledOpacityClass,"xp-text-gray-500"),dangerouslySetInnerHTML:{__html:description}}):null))},ListEntryHeader=_ref22=>{let{label:label}=_ref22;return react.createElement("div",{className:"xp-px-[0.2rem] xp-bg-gray-200 xp-mt-2 first:xp-mt-0 xp-sticky xp-top-0 xp-z-10"},react.createElement("div",{className:"xp-px-1.5 xp-py-1 xp-text-sm xp-leading-tight xp-font-bold"},label))},PlainResourceList=_ref23=>{let{resources:resources,onSelect:onSelect,emptyContent:emptyContent}=_ref23;return resources.length?react.createElement("div",{className:"xp-flex-1 xp-divide-y xp-divide-gray-200"},resources.map((o=>react.createElement(ListEntry,{key:"".concat(o.type||"").concat(o.name),resource:o,onSelect:()=>onSelect&&onSelect(o)})))):react.createElement(react.Fragment,null,emptyContent||react.createElement(EmptyResult,null))},LoadingResourceList=()=>react.createElement("div",{className:"xp-flex-1"},react.createElement("div",{className:"xp-h-8 xp-w-full xp-bg-gray-100 xp-mb-2"}),react.createElement("div",{className:"xp-h-8 xp-w-full xp-bg-gray-100 xp-mb-2"}),react.createElement("div",{className:"xp-h-8 xp-w-full xp-bg-gray-100 xp-mb-2"}),react.createElement("div",{className:"xp-h-8 xp-w-full xp-bg-gray-100 xp-mb-2"}),react.createElement("div",{className:"xp-h-8 xp-w-full xp-bg-gray-100 xp-mb-2"})),EmptyResult=_ref24=>{let{message:message,content:content}=_ref24;return react.createElement("div",{className:"xp-flex-1 xp-flex xp-flex-col xp-items-center xp-justify-center xp-text-center"},react.createElement("div",null,message||react.createElement(components_Str,{id:"noneareavailable"})),content?react.createElement("div",{className:"xp-my-2"},content):null)},ChevronLeftIconSolid=_ref29=>{let{className:className}=_ref29;return react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:className},react.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))},slideClasses="xp-absolute xp-inset-0 xp-transform-gpu xp-transition-transform xp-duration-300",slideNextClasses="".concat(slideClasses," xp-translate-x-full"),slidePrevClasses="".concat(slideClasses," xp--translate-x-full"),Slider=_ref30=>{let{children:rawChildren,index:index}=_ref30;const[internalIndex,setInternalIndex]=(0,react.useState)(index),slidesRef=(0,react.useRef)([]),children=react.Children.toArray(rawChildren).filter(Boolean),nSlides=children.length;return(0,react.useEffect)((()=>{slidesRef.current=slidesRef.current.slice(0,nSlides)}),[nSlides]),(0,react.useEffect)((()=>{const Aria=getModule("core/aria");slidesRef.current.forEach(((item,i)=>{i===internalIndex?(Aria.unhide(item),null==item||item.focus()):Aria.hide(item)}))}),[internalIndex]),(0,react.useEffect)((()=>{setInternalIndex(index)}),[index]),react.createElement("div",{className:"xp-w-full xp-h-full xp-overflow-hidden xp-relative"},react.Children.map(children,((child,i)=>{const isActive=i===internalIndex,isPast=i<internalIndex;return react.createElement("div",{ref:el=>slidesRef.current[i]=el,className:isActive?slideClasses:isPast?slidePrevClasses:slideNextClasses},child)})))},Slide=_ref31=>{let{children:children,header:header,footer:footer}=_ref31;return react.createElement("div",{className:"xp-w-full xp-h-full xp-flex xp-flex-col"},header,react.createElement("div",{className:"xp-flex xp-flex-col xp-grow xp-overflow-y-auto"},children),footer)},SlideHeader=_ref32=>{let{children:children,title:title,hasBack:hasBack,onBack:onBack}=_ref32;return react.createElement("div",{className:"xp-mb-2"},react.createElement("div",{className:"xp-flex xp-flex-row xp-items-center xp-gap-4"},hasBack?react.createElement("div",{className:"shrink-0 xp-grow-0"},react.createElement(CircleButton,{onClick:onBack,type:"button",className:"xp--mr-2"},react.createElement(ChevronLeftIconSolid,{className:"xp-h-6 xp-w-6"}),react.createElement("span",{className:"xp-sr-only"},react.createElement(components_Str,{id:"back",component:"core"})))):null,react.createElement("div",{className:"xp-flex-1 xp-text-lg xp-font-bold"},title)),children)},SlideHeaderWithFilter=_ref33=>{let{hasBack:hasBack,onBack:onBack,onFilterChange:onFilterChange,filterValue:filterValue,filterPlaceholder:filterPlaceholder,title:title}=_ref33;const filterStr=hooks_useString("filterellipsis"),handleChange=(0,react.useCallback)((e=>{onFilterChange&&onFilterChange(e.currentTarget.value||"")}),[onFilterChange]);return react.createElement(SlideHeader,{hasBack:hasBack,onBack:onBack,title:title},react.createElement("div",{className:"xp-mt-0.5"},react.createElement("input",{className:"form-control xp-w-full",type:"text",value:filterValue||"",placeholder:filterPlaceholder||filterStr,onChange:handleChange})))},CmResourceList=_ref34=>{let{courseId:courseId,filterTerm:filterTerm,onSelect:onSelect,resetFilterTerm:resetFilterTerm,options:options={}}=_ref34;const query=(0,es.useQuery)(["cm-resource-list",courseId,options],(async()=>{const Ajax=await getModuleAsync("core/ajax");return await Ajax.call([{methodname:"block_xp_search_modules",args:{courseid:courseId,query:"*",options:options}}])[0]})),resources=(0,react.useMemo)((()=>{const normalisedFilterTerm=(filterTerm||"").trim().toLowerCase(),data=query.data||[];return data.reduce(((carry,section,idx)=>{const modules=""===normalisedFilterTerm?section.modules:section.modules.filter((module=>module.name.includes(normalisedFilterTerm)));return modules.length?(data.length>1&&carry.push({name:idx,label:section.name,type:"header"}),modules.forEach((module=>{carry.push({name:module.cmid,label:module.name})})),carry):carry}),[])}),[query.data,filterTerm]);return!query.isSuccess||query.isLoading?react.createElement(LoadingResourceList,null):react.createElement(PlainResourceList,{resources:resources,onSelect:r=>onSelect(r.name),emptyContent:react.createElement(EmptyResult,{message:react.createElement(components_Str,{id:"nothingmatchesfilter"}),content:resetFilterTerm?react.createElement(Button,{onClick:resetFilterTerm},react.createElement(components_Str,{id:"clearfilter"})):null})})},CmResourceListSlide=_ref35=>{let{courseId:courseId,onSelect:onSelect,hasBack:hasBack,onBack:onBack,cmListOptions:cmListOptions}=_ref35;const[filterTerm,setFilterTerm]=(0,react.useState)("");return react.createElement(Slide,{header:react.createElement(SlideHeaderWithFilter,{filterValue:filterTerm,onFilterChange:setFilterTerm,hasBack:hasBack,onBack:onBack,title:react.createElement(components_Str,{id:"rulefiltercm"})})},react.createElement(CmResourceList,{options:cmListOptions,courseId:courseId,onSelect:onSelect,filterTerm:filterTerm,resetFilterTerm:()=>setFilterTerm("")}))},SectionResourceList=_ref36=>{let{courseId:courseId,onSelect:onSelect,options:options={}}=_ref36;const query=(0,es.useQuery)(["section-resource-list",courseId,options],(async()=>ajaxRequest("block_xp_get_sections",{courseid:courseId,options:options}))),resources=(0,react.useMemo)((()=>(query.data||[]).reduce(((carry,section,idx)=>(carry.push({name:section.number,label:section.name}),carry)),[])),[query.data]);return!query.isSuccess||query.isLoading?react.createElement(LoadingResourceList,null):react.createElement(PlainResourceList,{resources:resources,onSelect:r=>onSelect(r.name),emptyContent:react.createElement(EmptyResult,{message:react.createElement(components_Str,{id:"nothingmatchesfilter"})})})},CmNameSlide=_ref37=>{let{onBack:onBack,config:config,setConfig:setConfig}=_ref37;const getStr=hooks_useStrings(["rule:eq","rule:contains","rulefiltercmname"]);return react.createElement(Slide,{header:react.createElement(SlideHeader,{hasBack:!0,onBack:onBack,title:getStr("rulefiltercmname")})},react.createElement("div",{className:"xp-mb-4"},react.createElement("label",{htmlFor:"xp-rule-cmname-name",className:"xp-m-0"},react.createElement(components_Str,{id:"activityname"})),react.createElement("div",{className:"xp-flex xp-gap-2"},react.createElement("label",{htmlFor:"xp-rule-cmname-method",className:"xp-sr-only"},react.createElement(components_Str,{id:"comparisonmethod"})),react.createElement(Select,{id:"xp-rule-cmname-method",value:config.filterint1,onChange:e=>setConfig({filterint1:parseInt(e.currentTarget.value,10)||0}),defaultValue:1..toString(),className:"xp-w-auto"},react.createElement("option",{value:"1"},getStr("rule:contains")),react.createElement("option",{value:"0"},getStr("rule:eq"))),react.createElement(components_Input,{id:"xp-rule-cmname-name",value:config.filterchar1||"",onChange:e=>{var _config$filterint;return setConfig({filterchar1:e.currentTarget.value,filterint1:null!==(_config$filterint=config.filterint1)&&void 0!==_config$filterint?_config$filterint:1})},maxLength:255})),react.createElement("p",{className:"xp-text-gray-500 xp-m-0 xp-mt-1"},react.createElement(components_Str,{id:"activityname_help"}))),react.createElement(PointsToAwardInput,{config:config,setConfig:setConfig}))},anyFilterMethodStuff={getSlide:()=>null,hasSlide:!1,isConfigValid:()=>!0,isSlideRequiringSubmit:!1},filterMethoStuff={cm:{getSlide:props=>{var _props$method$scopeop,_props$method$scopeop2;return react.createElement(CmResourceListSlide,{cmListOptions:{completionenabled:null===(_props$method$scopeop=props.method.scopeoptions)||void 0===_props$method$scopeop?void 0:_props$method$scopeop.completionenabled,type:null===(_props$method$scopeop2=props.method.scopeoptions)||void 0===_props$method$scopeop2?void 0:_props$method$scopeop2.type},hasBack:props.hasBack,onBack:props.onBack,courseId:props.courseId,onSelect:cmid=>{props.setConfig({filtercmid:cmid}),props.onContinue()}})},hasSlide:!0,isConfigValid:()=>!0,isSlideRequiringSubmit:!1},cmname:{getSlide:props=>react.createElement(CmNameSlide,{onBack:props.onBack,config:props.config,setConfig:props.setConfig}),hasSlide:!0,isConfigValid:config=>[0,1].includes(null==config?void 0:config.filterint1)&&"string"==typeof config.filterchar1&&""!==config.filterchar1.trim()&&"number"==typeof(null==config?void 0:config.points)&&!isNaN(config.points),isSlideRequiringSubmit:!0,collectsPoints:!0},section:{getSlide:props=>react.createElement(Slide,{header:react.createElement(SlideHeader,{hasBack:props.hasBack,onBack:props.onBack,title:react.createElement(components_Str,{id:"rulefiltersection"})})},react.createElement(SectionResourceList,{courseId:props.courseId,onSelect:num=>{props.setConfig({filterint1:num}),props.onContinue()}})),hasSlide:!0,isConfigValid:()=>!0,isSlideRequiringSubmit:!1},any:anyFilterMethodStuff,anycm:anyFilterMethodStuff,anycourse:anyFilterMethodStuff,anysection:anyFilterMethodStuff,thiscourse:anyFilterMethodStuff},defaultConfig={points:10},RuleWizardModal=props=>{var _filterMethoStuff$sel;const getStr=hooks_useStrings(["addacondition"]),getCoreStr=hooks_useStrings(["continue","save"],"core"),[selectedMethod,setSelectedMethod]=(0,react.useState)(null),[config,setConfig]=(0,react.useState)(defaultConfig),[index,setIndex]=(0,react.useState)(0),handleIndexChange=rawIndex=>{const newIndex=Math.max(0,rawIndex);0===newIndex&&setConfig(defaultConfig),setIndex(newIndex)},handleBack=()=>{handleIndexChange(index-1)},resetState=(0,react.useCallback)((()=>{setSelectedMethod(null),setConfig(defaultConfig),setIndex(0)}),[]);(0,react.useEffect)((()=>{props.show||resetState()}),[props.show]);const methodStuff=selectedMethod&&null!==(_filterMethoStuff$sel=filterMethoStuff[selectedMethod])&&void 0!==_filterMethoStuff$sel?_filterMethoStuff$sel:null,isLastStep=index===(null==methodStuff||!methodStuff.hasSlide||null!=methodStuff&&methodStuff.collectsPoints?1:2),isStepContinue=!isLastStep,isStepValid=!methodStuff||1!==index||(null==methodStuff?void 0:methodStuff.isConfigValid(config)),isStepRequiringButton=Boolean(null==methodStuff?void 0:methodStuff.isSlideRequiringSubmit),canClickSaveButton=(isLastStep||isStepRequiringButton)&&isStepValid,methodSlide=selectedMethod?null==methodStuff?void 0:methodStuff.getSlide({setConfig:data=>{setConfig({...config,...data})},config:config,hasBack:1===index,onBack:handleBack,onContinue:()=>handleIndexChange(index+1),method:props.method,courseId:props.courseid}):null,sortedFilters=(0,react.useMemo)((()=>props.filters.sort(((a,b)=>{var _a$weight,_b$weight;const wa=null!==(_a$weight=a.weight)&&void 0!==_a$weight?_a$weight:null,wb=null!==(_b$weight=b.weight)&&void 0!==_b$weight?_b$weight:null;return wa===wb?0:null===wa||null===wb?1:0===wa?-1:wb-wa}))),[props.filters]);return react.createElement(SaveCancelModal,{show:props.show,large:!0,defaultHeight:500,canSave:canClickSaveButton,onSave:e=>{e.preventDefault(),canClickSaveButton&&(isStepContinue?handleIndexChange(index+1):selectedMethod&&props.onSave({filter:selectedMethod,config:config}))},onClose:()=>{props.onClose()},saveButtonText:getCoreStr(isStepContinue?"continue":"save"),title:getStr("addacondition")},react.createElement(Slider,{index:index},react.createElement(Slide,null,react.createElement(PlainResourceList,{onSelect:r=>{var method;(method=r.name)in filterMethoStuff&&(setSelectedMethod(method),setIndex(1))},resources:sortedFilters})),selectedMethod&&methodSlide?methodSlide:null,!selectedMethod||null!=methodStuff&&methodStuff.collectsPoints?null:react.createElement(Slide,{header:react.createElement(SlideHeader,{hasBack:!0,onBack:handleBack,title:null!=methodStuff&&methodStuff.hasSlide?react.createElement(components_Str,{id:"pointstoaward"}):react.createElement(components_Str,{id:"rulefilter".concat(selectedMethod)})})},react.createElement("div",{className:""},react.createElement(PointsToAwardInput,{config:config,setConfig:setConfig})))))},PointsToAwardInput=_ref38=>{let{setConfig:setConfig,config:config}=_ref38;return react.createElement("div",null,react.createElement("label",{htmlFor:"xp-rule-pointstoaward",className:"xp-m-0"},react.createElement(components_Str,{id:"pointstoaward"})),react.createElement("div",null,react.createElement(NumberInputWithButtons,{value:config.points,onChange:points=>setConfig({...config,points:points}),min:0,max:9999999,inputProps:{id:"xp-rule-pointstoaward",className:"xp-w-24",selectOnFocus:!0}})),react.createElement("p",{className:"xp-text-gray-500 xp-m-0 xp-mt-1"},react.createElement(components_Str,{id:"pointstoaward_help"})))};const query_queryClient=new(__webpack_require__(98).E)({defaultOptions:{queries:{staleTime:6e4,onError:err=>getModule("core/notification").exception(err)},mutations:{onError:err=>getModule("core/notification").exception(err)}}});var ContextLevel;!function(ContextLevel){ContextLevel[ContextLevel.System=10]="System",ContextLevel[ContextLevel.User=30]="User",ContextLevel[ContextLevel.CourseCategory=40]="CourseCategory",ContextLevel[ContextLevel.Course=50]="Course",ContextLevel[ContextLevel.Module=70]="Module"}(ContextLevel||(ContextLevel={}));const AppContext=react.createContext({rules:[],addRule:()=>{},editRule:id=>{},removeRule:id=>{}}),availableRuleTypes=["cm_completion","section_completion","course_completion"],guessMethodFromLocation=()=>{var _window$location$hash;return Math.max(0,availableRuleTypes.indexOf((null!==(_window$location$hash=window.location.hash)&&void 0!==_window$location$hash?_window$location$hash:"").replace(/^#/,"")))},App=props=>{var _props$childcontext$i,_props$childcontext,_props$childcontext2,_groupedRules$current2;const queryClient=(0,es.useQueryClient)(),[selectedTabIndex,setSelectedTabIndex]=(0,react.useState)(guessMethodFromLocation),[optimisticallyDeleted,setOptimisticallyDeleted]=(0,react.useState)([]),childcontextid=null!==(_props$childcontext$i=null===(_props$childcontext=props.childcontext)||void 0===_props$childcontext?void 0:_props$childcontext.id)&&void 0!==_props$childcontext$i?_props$childcontext$i:null,currentCourseId=(null===(_props$childcontext2=props.childcontext)||void 0===_props$childcontext2?void 0:_props$childcontext2.contextlevel)===ContextLevel.Course?props.childcontext.instanceid:props.world.courseid,[isAdding,setIsAdding]=(0,react.useState)(!1),[isEditing,setIsEditing]=(0,react.useState)(null),[isDeleting,setIsDeleting]=(0,react.useState)(null),getStr=hooks_useStrings(["deletecondition","editcondition","ruleadded"]),rulesQuery=((contextid,types,childcontextid)=>(0,es.useQuery)(["rules",contextid,types,childcontextid],(async()=>(await ajaxRequest("block_xp_get_rules",{contextid:contextid,types:types,childcontextid:childcontextid})).map((data=>({...data,method:data.typename,filter:data.filtername}))))))(props.world.contextid,availableRuleTypes,childcontextid),addRuleMutation=((contextid,childcontextid,_ref39)=>{let{onSuccess:onSuccess}=_ref39;return(0,es.useMutation)((async _ref40=>{var _config$points,_config$typechar,_config$filtercoursei,_config$filtercmid,_config$filterint2,_config$filterchar;let{method:method,filter:filter,config:config}=_ref40;return ajaxRequest("block_xp_create_rule",{contextid:contextid,childcontextid:null!=childcontextid?childcontextid:0,points:null!==(_config$points=config.points)&&void 0!==_config$points?_config$points:0,type:{name:method,char1:null!==(_config$typechar=config.typechar1)&&void 0!==_config$typechar?_config$typechar:null},filter:{name:filter,courseid:null!==(_config$filtercoursei=config.filtercourseid)&&void 0!==_config$filtercoursei?_config$filtercoursei:null,cmid:null!==(_config$filtercmid=config.filtercmid)&&void 0!==_config$filtercmid?_config$filtercmid:null,int1:null!==(_config$filterint2=config.filterint1)&&void 0!==_config$filterint2?_config$filterint2:null,char1:null!==(_config$filterchar=config.filterchar1)&&void 0!==_config$filterchar?_config$filterchar:null}})}),{onSuccess:onSuccess})})(props.world.contextid,childcontextid,{onSuccess:()=>{invalidateCurrentQuery(),setIsAdding(!1);const Toast=getModule("core/toast");Toast&&Toast.add(getStr("ruleadded"))}}),deleteRuleMutation=(0,es.useMutation)((async _ref41=>{let{id:id}=_ref41;return ajaxRequest("block_xp_delete_rule",{id:id})})),currentRuleType=availableRuleTypes[selectedTabIndex],rules=(0,react.useMemo)((()=>(rulesQuery.data||[]).filter((r=>!optimisticallyDeleted.includes(r.id)))),[rulesQuery.data,optimisticallyDeleted]),invalidateCurrentQuery=(0,react.useCallback)((()=>{queryClient.invalidateQueries(["rules",props.world.contextid,availableRuleTypes,childcontextid])}),[queryClient,props]),ruleTypesByName=(0,react.useMemo)((()=>props.ruletypes.reduce(((acc,ruletype)=>(acc[ruletype.name]=ruletype,acc)),{})),[props.ruletypes]),groupedRules=(0,react.useMemo)((()=>rules.reduce(((acc,rule)=>(acc[rule.method]||(acc[rule.method]=[]),acc[rule.method].push(rule),acc)),{})),[rules]),currentMethodFilters=(0,react.useMemo)((()=>{var _ruleTypesByName$curr;return null!==(_ruleTypesByName$curr=ruleTypesByName[currentRuleType])&&void 0!==_ruleTypesByName$curr&&_ruleTypesByName$curr.filters?props.rulefilters.filter((filter=>ruleTypesByName[currentRuleType].filters.includes(filter.name))).filter((filter=>{var _groupedRules$current;return filter.ismultipleallowed||!(null!==(_groupedRules$current=groupedRules[currentRuleType])&&void 0!==_groupedRules$current&&_groupedRules$current.some((rule=>rule.filter===filter.name)))})):[]}),[currentRuleType,props.rulefilters,groupedRules]),showAddBtnInTabs=null===(_groupedRules$current2=groupedRules[currentRuleType])||void 0===_groupedRules$current2?void 0:_groupedRules$current2.length;return rulesQuery.isLoading||rulesQuery.isError?react.createElement(AppLoading,null):react.createElement(AppContext.Provider,{value:{rules:rules,addRule:()=>setIsAdding(!0),editRule:ruleId=>setIsEditing(ruleId),removeRule:ruleId=>setIsDeleting(ruleId)}},react.createElement("div",null,react.createElement(tabs.o.Group,{selectedIndex:selectedTabIndex,onChange:idx=>{setSelectedTabIndex(idx),setIsAdding(!1),setIsEditing(null),setIsDeleting(null),(idx=>{const hash="#"+availableRuleTypes[idx];window.location.hash=hash})(idx)}},react.createElement(tabs.o.List,{as:"div",className:"nav nav-tabs"},react.createElement(tabs.o,{as:react.Fragment},(_ref42=>{let{selected:selected}=_ref42;return react.createElement("button",{className:utils_classNames("nav-item nav-link",selected?"active":null)},react.createElement(components_Str,{id:"activity",component:"core"}))})),react.createElement(tabs.o,{as:react.Fragment},(_ref43=>{let{selected:selected}=_ref43;return react.createElement("button",{className:utils_classNames("nav-item nav-link",selected?"active":null)},react.createElement(components_Str,{id:"section",component:"core"}))})),react.createElement(tabs.o,{as:react.Fragment},(_ref44=>{let{selected:selected}=_ref44;return react.createElement("button",{className:utils_classNames("nav-item nav-link",selected?"active":null)},react.createElement(components_Str,{id:"course",component:"core"}))})),react.createElement("div",{className:"xp-flex-1 xp-flex xp-justify-end xp-items-center"},showAddBtnInTabs?react.createElement("button",{className:"btn btn-primary btn-sm",onClick:()=>setIsAdding(!0)},react.createElement(components_Str,{id:"add",component:"core"})):null)),react.createElement(tabs.o.Panels,{className:"xp-mt-4"},react.createElement(tabs.o.Panel,null,"cm_completion"in ruleTypesByName?react.createElement(CompletionRules,{rules:groupedRules.cm_completion,type:ruleTypesByName.cm_completion,filters:props.rulefilters}):react.createElement(NotificationError,null,react.createElement(components_Str,{id:"unknowntypea",a:"cm_completion"}))),react.createElement(tabs.o.Panel,null,"section_completion"in ruleTypesByName?react.createElement(CompletionRules,{rules:groupedRules.section_completion,type:ruleTypesByName.section_completion,filters:props.rulefilters}):react.createElement(NotificationError,null,react.createElement(components_Str,{id:"unknowntype",a:"section_completion"}))),react.createElement(tabs.o.Panel,null,"course_completion"in ruleTypesByName?react.createElement(CompletionRules,{rules:groupedRules.course_completion,type:ruleTypesByName.course_completion,filters:props.rulefilters}):react.createElement(NotificationError,null,react.createElement(components_Str,{id:"unknowntype",a:"course_completion"})))))),react.createElement(RuleWizardModal,{show:isAdding,courseid:currentCourseId,contextlevel:props.world.contextlevel,method:ruleTypesByName[currentRuleType],filters:currentMethodFilters,onClose:()=>setIsAdding(!1),onSave:_ref45=>{let{filter:filter,config:config}=_ref45;addRuleMutation.mutate({method:currentRuleType,filter:filter,config:config})}}),react.createElement(DeleteModal,{show:null!==isDeleting,onClose:()=>setIsDeleting(null),onDelete:()=>{isDeleting&&(setOptimisticallyDeleted([...optimisticallyDeleted,isDeleting]),deleteRuleMutation.mutate({id:isDeleting},{onError:()=>{setOptimisticallyDeleted(optimisticallyDeleted.filter((id=>id!==isDeleting)))},onSuccess:()=>{invalidateCurrentQuery()},onSettled:()=>{setIsDeleting(null)}}))},title:getStr("deletecondition")},react.createElement(components_Str,{id:"areyousure",component:"core"})),isEditing?react.createElement(ModalForm,{formClass:"block_xp\\form\\rule",formArgs:{id:isEditing},title:getStr("editcondition"),onClose:()=>setIsEditing(null),onSubmit:()=>{setIsEditing(null),invalidateCurrentQuery()}}):null)},NoRulesZeroState=_ref46=>{let{onClick:onClick}=_ref46;return react.createElement("div",{className:"xp-rounded xp-border-dashed xp-border-2 xp-p-4 xp-py-6 xp-text-center xp-border-gray-200"},react.createElement("div",{className:"xp-text-xl xp-font-bold xp-mb-4"},react.createElement(components_Str,{id:"noconditionsyet"})),react.createElement("div",null,react.createElement(components_Str,{id:"noconditionsyetintro"})),react.createElement("div",{className:"xp-mt-4"},react.createElement("button",{className:"btn btn-primary",onClick:onClick},react.createElement(components_Str,{id:"add",component:"core"}))))},CompletionRules=_ref47=>{let{rules:rules,type:type,filters:filters}=_ref47;const filteredRules=(0,react.useMemo)((()=>null==rules?void 0:rules.filter((r=>type.filters.includes(r.filter)&&filters.find((f=>f.name===r.filter))))),[rules,type.filters]),groupedRules=(0,react.useMemo)((()=>(rules=>rules?rules.map((rule=>rule.filter)).filter(((value,index,self)=>self.indexOf(value)===index)).map((filterName=>{const rulesForFilter=rules.filter((rule=>rule.filter===filterName));return{filter:filterName,rules:rulesForFilter}})).filter((group=>group.rules.length>0)):[])(filteredRules)),[filteredRules]),{addRule:addRule,removeRule:removeRule,editRule:editRule}=react.useContext(AppContext),handleAddClick=()=>{addRule()};return null!=filteredRules&&filteredRules.length?react.createElement("div",{className:"xp-space-y-4"},groupedRules.map((_ref48=>{let{filter:filter,rules:rules}=_ref48;const ruleFilter=filters.find((f=>f.name===filter));return ruleFilter?react.createElement(RulesSection,{key:filter,title:null==ruleFilter?void 0:ruleFilter.label,description:null==ruleFilter?void 0:ruleFilter.description},rules.map((rule=>react.createElement(Rule,{key:rule.id,points:rule.points,label:rule.label,onDelete:()=>removeRule(rule.id),onEdit:()=>editRule(rule.id)})))):null}))):react.createElement(NoRulesZeroState,{onClick:handleAddClick})},RulesSection=_ref49=>{let{children:children,title:title,description:description}=_ref49;return react.createElement("div",null,react.createElement("h5",{className:"xp-font-bold xp-m-0 xp-mb-1 xp-text-base"},title),react.createElement("p",{className:"xp-mb-2 xp-text-sm xp-text-gray-500 xp-m-0"},description),react.createElement("div",{className:"[&>div]:xp-border-0 [&>div]:xp-border-b [&>div]:xp-border-solid [&>div]:xp-border-gray-200"},children))},Rule=_ref50=>{let{points:points,label:label,onDelete:onDelete,onEdit:onEdit}=_ref50;return react.createElement("div",{className:""},react.createElement("div",{className:"xp-flex xp-gap-2"},react.createElement("div",{className:"xp-shrink-0 xp-flex xp-items-center"},react.createElement("div",{className:utils_classNames("xp-min-w-[86px] xp-text-center xp-rounded xp-px-2 xp-py-0.5 xp-font-bold xp-tracking-wide",points?"xp-bg-blue-100":"xp-bg-gray-200")},null!==points?"".concat(0!=points?"+":"").concat(points):"-")),react.createElement("div",{className:"xp-grow xp-flex xp-items-center"},react.createElement("div",{className:"xp-grow"},label)),react.createElement("div",{className:"xp-shrink-0"},react.createElement(RuleDropdown,{onDelete:onDelete,onEdit:onEdit}))))},RuleDropdown=_ref51=>{let{onEdit:onEdit,onDelete:onDelete}=_ref51;const deleteProps=hooks_useAnchorButtonProps(onDelete),editProps=hooks_useAnchorButtonProps(onEdit);return react.createElement(Dropdown,{buttonLabel:react.createElement(components_Str,{id:"options",component:"core"}),items:[{id:"edit",label:react.createElement(components_Str,{id:"edit",component:"core"}),props:editProps},{id:"delete",label:react.createElement(components_Str,{id:"delete",component:"core"}),props:deleteProps,danger:!0}]})};function startApp(node,props){react_dom.render(react.createElement(contexts_AddonContext.Provider,{value:makeAddonContextValueFromAppProps(props)},react.createElement(es.QueryClientProvider,{client:query_queryClient},react.createElement(App,{...props}))),node)}const dependencies=(names=>{let optional=[];const list=names.map((name=>{const isOptional="?"===name.charAt(0),module=isOptional?name.substring(1):name;return isOptional&&optional.push(module),module}));return{list:list,optional:optional,loader:mods=>{mods.forEach(((mod,i)=>{!function(name,mod){modules[name]=mod}(list[i],mod)}))}}})(["core/notification","core/aria","?core/toast","jquery"])}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(result,chunkIds,fn,priority)=>{if(!chunkIds){var notFulfilled=1/0;for(i=0;i<deferred.length;i++){for(var[chunkIds,fn,priority]=deferred[i],fulfilled=!0,j=0;j<chunkIds.length;j++)(!1&priority||notFulfilled>=priority)&&Object.keys(__webpack_require__.O).every((key=>__webpack_require__.O[key](chunkIds[j])))?chunkIds.splice(j--,1):(fulfilled=!1,priority<notFulfilled&&(notFulfilled=priority));if(fulfilled){deferred.splice(i--,1);var r=fn();void 0!==r&&(result=r)}}return result}priority=priority||0;for(var i=deferred.length;i>0&&deferred[i-1][2]>priority;i--)deferred[i]=deferred[i-1];deferred[i]=[chunkIds,fn,priority]},__webpack_require__.n=module=>{var getter=module&&module.__esModule?()=>module.default:()=>module;return __webpack_require__.d(getter,{a:getter}),getter},getProto=Object.getPrototypeOf?obj=>Object.getPrototypeOf(obj):obj=>obj.__proto__,__webpack_require__.t=function(value,mode){if(1&mode&&(value=this(value)),8&mode)return value;if("object"==typeof value&&value){if(4&mode&&value.__esModule)return value;if(16&mode&&"function"==typeof value.then)return value}var ns=Object.create(null);__webpack_require__.r(ns);var def={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var current=2&mode&&value;"object"==typeof current&&!~leafPrototypes.indexOf(current);current=getProto(current))Object.getOwnPropertyNames(current).forEach((key=>def[key]=()=>value[key]));return def.default=()=>value,__webpack_require__.d(ns,def),ns},__webpack_require__.d=(exports,definition)=>{for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop),__webpack_require__.r=exports=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.j=834,(()=>{var installedChunks={834:0};__webpack_require__.O.j=chunkId=>0===installedChunks[chunkId];var webpackJsonpCallback=(parentChunkLoadingFunction,data)=>{var moduleId,chunkId,[chunkIds,moreModules,runtime]=data,i=0;if(chunkIds.some((id=>0!==installedChunks[id]))){for(moduleId in moreModules)__webpack_require__.o(moreModules,moduleId)&&(__webpack_require__.m[moduleId]=moreModules[moduleId]);if(runtime)var result=runtime(__webpack_require__)}for(parentChunkLoadingFunction&&parentChunkLoadingFunction(data);i<chunkIds.length;i++)chunkId=chunkIds[i],__webpack_require__.o(installedChunks,chunkId)&&installedChunks[chunkId]&&installedChunks[chunkId][0](),installedChunks[chunkId]=0;return __webpack_require__.O(result)},chunkLoadingGlobal=globalThis.webpackChunkblock_xp=globalThis.webpackChunkblock_xp||[];chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null,0)),chunkLoadingGlobal.push=webpackJsonpCallback.bind(null,chunkLoadingGlobal.push.bind(chunkLoadingGlobal))})();var __webpack_exports__=__webpack_require__.O(void 0,[224],(()=>__webpack_require__(913)));return __webpack_exports__=__webpack_require__.O(__webpack_exports__)})()));

//# sourceMappingURL=ui-completion-rules-lazy.min.js.map