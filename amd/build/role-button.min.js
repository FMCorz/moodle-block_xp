/**
 * Role button.
 *
 * @copyright  2022 Frédéric Massart
 * @author     Frédéric Massart <fred@branchup.tech>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_xp/role-button",[],(function(){return{delegateClick:function(rootSelector,nodeSelector,onClick){const nodes=document.querySelectorAll(rootSelector),handleHit=e=>{const node=e.target.closest("a,button,[role=button]");if(node&&node.matches(nodeSelector)){if(e.defaultPrevented)return;e.preventDefault(),onClick(node)}};nodes.forEach((node=>{node.addEventListener("click",handleHit),node.addEventListener("keydown",(e=>{" "!==e.key&&"Enter"!==e.key||handleHit(e)})),node.querySelectorAll(nodeSelector).forEach((node=>{node.getAttribute("role")||node.setAttribute("role","button"),node.hasAttribute("tabindex")||node.setAttribute("tabindex","0")})),node.onclick&&(node.onclick=void 0)}))},registerClick:function(selector,onClick){document.querySelectorAll(selector).forEach((node=>{const handleHit=e=>{e.defaultPrevented||(e.preventDefault(),onClick(node))};node.addEventListener("click",handleHit),node.addEventListener("keydown",(e=>{" "!==e.key&&"Enter"!==e.key||handleHit(e)})),node.getAttribute("role")||node.setAttribute("role","button"),node.hasAttribute("tabindex")||node.setAttribute("tabindex","0"),node.onclick&&(node.onclick=void 0)}))}}}));

//# sourceMappingURL=role-button.min.js.map